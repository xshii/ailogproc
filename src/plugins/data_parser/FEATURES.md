# data_parser æ’ä»¶åŠŸèƒ½æ€»ç»“

## âœ… å·²å®ç°åŠŸèƒ½

### 1. åŸºç¡€åŠŸèƒ½
- âœ… è§£æ16è¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆç©ºæ ¼åˆ†éš” `1A 02 FF` æˆ–ç´§å‡‘æ ¼å¼ `1A02FF`ï¼‰
- âœ… æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼šuint8, uint16, uint32, hex, string
- âœ… å¤§å°ç«¯æ”¯æŒï¼ˆbig-endian / little-endianï¼‰
- âœ… å­—æ®µå€¼æ˜ å°„ï¼ˆæ•°å€¼â†’åç§°ï¼‰
- âœ… å¯é€‰çš„headerå’ŒchecksuméªŒè¯

### 2. å¤šäºŒè¿›åˆ¶å—æ¨¡å¼ â­ æ–°å¢
- âœ… ä»æ—¥å¿—ä¸­æå–å¤šä¸ªæ•°æ®å—
- âœ… æ•°æ®å—æ ‡è®°è¯†åˆ«ï¼š
  - `@type:` - æ•°æ®ç±»å‹ï¼ˆfirmware, config, calibrationç­‰ï¼‰
  - `@address:` - å†…å­˜åœ°å€ï¼ˆæ”¯æŒ0x1000æˆ–1000æ ¼å¼ï¼‰
  - `@size:` - æ•°æ®å¤§å°ï¼ˆå¯é€‰ï¼‰
  - `@name:` - æ•°æ®å—åç§°ï¼ˆå¯é€‰ï¼‰
- âœ… è‡ªåŠ¨å¯¼å‡ºä¸ºç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶
- âœ… ç”Ÿæˆmanifestæ¸…å•ï¼ˆJSONæ ¼å¼ï¼‰

### 3. å¯¼å‡ºåŠŸèƒ½
- âœ… äºŒè¿›åˆ¶æ–‡ä»¶å¯¼å‡ºï¼ˆ.binï¼‰
- âœ… å¯è‡ªå®šä¹‰æ–‡ä»¶åæ¨¡æ¿
- âœ… Manifestæ¸…å•ç”Ÿæˆ
  - åŒ…å«æ‰€æœ‰æ•°æ®å—çš„å…ƒæ•°æ®
  - åœ°å€ã€å¤§å°ã€ç±»å‹ã€æ–‡ä»¶åæ˜ å°„
  - è¡Œå·èŒƒå›´è®°å½•

### 4. æŠ¥å‘ŠåŠŸèƒ½
- âœ… JSONæ ¼å¼æ•°æ®æŠ¥å‘Š
- âœ… åŒ…å«åŸå§‹hexå’Œè§£æåæ•°æ®
- âœ… ç»Ÿè®¡ä¿¡æ¯ï¼ˆæˆåŠŸç‡ã€æ€»æ•°ç­‰ï¼‰

## ğŸ“Š æµ‹è¯•è¦†ç›–

### åŸºç¡€æµ‹è¯•ï¼ˆ29ä¸ªï¼‰
- æ•°æ®ç±»å‹è§£æ
- å¤§å°ç«¯è½¬æ¢
- å­—æ®µæå–
- å€¼æ˜ å°„
- è¾¹ç•Œæ¡ä»¶
- é”™è¯¯å¤„ç†

### å—æ¨¡å¼æµ‹è¯•ï¼ˆ10ä¸ªï¼‰
- å¤šå—æå–
- äºŒè¿›åˆ¶å¯¼å‡º
- Manifestç”Ÿæˆ
- åœ°å€æ ¼å¼
- å¤§æ•°æ®é›†
- æ··åˆæ•°æ®

**æ€»è®¡ï¼š39ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ âœ…**

## ğŸ“¦ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šå›ºä»¶æ›´æ–°
```
æ—¥å¿—åŒ…å«ï¼š
- bootloader (0x1000)
- main firmware (0x10000)
- config (0x20000)

è¾“å‡ºï¼š
- bootloader_00001000.bin
- firmware_00010000.bin
- config_00020000.bin
- manifest.json
```

### åœºæ™¯2ï¼šç¡¬ä»¶è°ƒè¯•
```
æ—¥å¿—åŒ…å«ï¼š
- å¯„å­˜å™¨dump
- å†…å­˜å¿«ç…§
- æ ¡å‡†æ•°æ®

è¾“å‡ºï¼š
- å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶
- åœ°å€æ˜ å°„è¡¨
```

### åœºæ™¯3ï¼šåè®®åˆ†æ
```
æ—¥å¿—åŒ…å«ï¼š
- å¤šä¸ªæ•°æ®åŒ…
- ä¸åŒç±»å‹çš„payload

è¾“å‡ºï¼š
- è§£æåçš„ç»“æ„åŒ–æ•°æ®
- JSONæŠ¥å‘Š
```

## ğŸ¯ å…¸å‹å·¥ä½œæµ

1. **å‡†å¤‡æ—¥å¿—æ–‡ä»¶**
   ```
   @type: firmware
   @address: 0x1000
   @name: bootloader
   AA BB CC DD EE FF
   ```

2. **é…ç½®æ’ä»¶**
   ```yaml
   source:
     block_mode: true
   output:
     export_binary: true
     generate_manifest: true
   ```

3. **æ‰§è¡Œè§£æ**
   ```python
   result = plugin.execute({"trace_file": "log.txt"})
   ```

4. **è·å–è¾“å‡º**
   - äºŒè¿›åˆ¶æ–‡ä»¶ï¼š`output/binaries/*.bin`
   - æ¸…å•æ–‡ä»¶ï¼š`output/manifest.json`

## ğŸ“ Manifest ç¤ºä¾‹

```json
{
  "version": "1.0",
  "generated_at": "2024-01-15T10:00:00",
  "total_blocks": 3,
  "total_bytes": 128,
  "blocks": [
    {
      "index": 0,
      "type": "bootloader",
      "address": "0x00001000",
      "size": 48,
      "name": "bootloader_v1.2",
      "binary_file": "bootloader_00001000.bin",
      "start_line": 7,
      "end_line": 13
    }
  ]
}
```

## ğŸ”§ é…ç½®é€‰é¡¹

### æ•°æ®æº
- `type`: "log_file" æˆ– "direct"
- `block_mode`: æ˜¯å¦æ”¯æŒå¤šå—
- `format`: "spaced" æˆ– "compact"

### å—æ ‡è®°ï¼ˆblock_mode=trueæ—¶ï¼‰
- `type_marker`: ç±»å‹æ ‡è®°ï¼ˆé»˜è®¤ "@type:"ï¼‰
- `address_marker`: åœ°å€æ ‡è®°ï¼ˆé»˜è®¤ "@address:"ï¼‰
- `size_marker`: å¤§å°æ ‡è®°ï¼ˆé»˜è®¤ "@size:"ï¼‰
- `name_marker`: åç§°æ ‡è®°ï¼ˆé»˜è®¤ "@name:"ï¼‰

### è¾“å‡º
- `export_binary`: æ˜¯å¦å¯¼å‡ºäºŒè¿›åˆ¶
- `binary_output_dir`: äºŒè¿›åˆ¶è¾“å‡ºç›®å½•
- `binary_name_template`: æ–‡ä»¶åæ¨¡æ¿
- `generate_manifest`: æ˜¯å¦ç”Ÿæˆæ¸…å•
- `manifest_path`: æ¸…å•æ–‡ä»¶è·¯å¾„

## ğŸš€ æ€§èƒ½

- âœ… æ”¯æŒå¤§æ•°æ®é›†ï¼ˆæµ‹è¯•è¿‡100ä¸ªå—ï¼‰
- âœ… å†…å­˜é«˜æ•ˆï¼ˆæµå¼å¤„ç†ï¼‰
- âœ… å¿«é€Ÿè§£æï¼ˆ39ä¸ªæµ‹è¯• < 1ç§’ï¼‰

## ğŸ“š ç¤ºä¾‹ä»£ç 

æŸ¥çœ‹ï¼š
- `examples/data_parser_example.py` - åŸºç¡€ç”¨æ³•
- `examples/binary_export_example.py` - å¤šäºŒè¿›åˆ¶å¯¼å‡º
- `examples/sample_binary_data.log` - ç¤ºä¾‹æ—¥å¿—

## ğŸ“ ä¸‹ä¸€æ­¥æ‰©å±•

å¯èƒ½çš„å¢å¼ºï¼š
- [ ] CRC/checksumè‡ªåŠ¨è®¡ç®—
- [ ] åŠ¨æ€é•¿åº¦å­—æ®µæ”¯æŒ
- [ ] äºŒè¿›åˆ¶åˆå¹¶åŠŸèƒ½
- [ ] Intel HEX / Motorola S-Record æ ¼å¼è¾“å‡º
- [ ] å¯è§†åŒ–åœ°å€æ˜ å°„å›¾
